// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id              Int               @id @default(autoincrement())
  nome            String
  email           String            @unique
  senha           String            @unique
  nascimento      DateTime
  cep             String
  EncontroUsuario EncontroUsuario[]
  Equipe          Equipe[]
  UsuarioEquipe   UsuarioEquipe[]
  Campeonato      Campeonato[]
}

model Local {
  id                 Int                  @id @default(autoincrement())
  nome               String
  capacidade         Int
  cep                String
  Encontro           Encontro[]
  Partida_campeonato Partida_campeonato[]
}

model Encontro {
  id              Int               @id @default(autoincrement())
  descricao       String
  data            DateTime
  titulo          String
  id_local        Int
  local           Local             @relation(fields: [id_local], references: [id])
  EncontroUsuario EncontroUsuario[]
}

model EncontroUsuario {
  id          Int      @id @default(autoincrement())
  id_encontro Int
  id_usuario  Int
  usuario     Usuario  @relation(fields: [id_usuario], references: [id])
  encontro    Encontro @relation(fields: [id_encontro], references: [id])
}

model Equipe {
  id                 Int                  @id @default(autoincrement())
  nome               String
  id_user            Int
  usuario            Usuario              @relation(fields: [id_user], references: [id])
  UsuarioEquipe      UsuarioEquipe[]
  EquipePartida      EquipePartida[]
  Partida_campeonato Partida_campeonato[]
}

model UsuarioEquipe {
  id         Int     @id @default(autoincrement())
  id_usuario Int
  id_equipe  Int
  usuario    Usuario @relation(fields: [id_usuario], references: [id])
  equipe     Equipe  @relation(fields: [id_equipe], references: [id])
}

model Campeonato {
  id                 Int                  @id @default(autoincrement())
  esporte            String
  premio             Float
  valor_entrada      Float
  descricao          String
  id_criador         Int
  usuario            Usuario              @relation(fields: [id_criador], references: [id])
  Partida_campeonato Partida_campeonato[]
}

model EquipePartida {
  id             Int                @id @default(autoincrement())
  id_equipe      Int
  id_partidaCamp Int
  equipe         Equipe             @relation(fields: [id_equipe], references: [id])
  partidaCamp    Partida_campeonato @relation(fields: [id_partidaCamp], references: [id])
}

model Partida_campeonato {
  id         Int        @id @default(autoincrement())
  pontuacao  Int
  id_local   Int
  id_camp    Int
  id_equipe  Int
  local      Local      @relation(fields: [id_local], references: [id])
  campeonato Campeonato @relation(fields: [id_camp], references: [id])
  equipe     Equipe     @relation(fields: [id_equipe], references: [id])
  EquipePartida EquipePartida[]
}
